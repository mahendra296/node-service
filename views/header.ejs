<header class="main-header">
  <div class="header-container">
    <a href="/" class="logo">
      <span class="logo-icon">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
          <rect width="40" height="40" rx="8" fill="#1a56db" />
          <path d="M20 8L32 14V18H8V14L20 8Z" fill="white" />
          <rect x="10" y="20" width="4" height="12" fill="white" />
          <rect x="18" y="20" width="4" height="12" fill="white" />
          <rect x="26" y="20" width="4" height="12" fill="white" />
          <rect x="8" y="32" width="24" height="3" fill="white" />
        </svg>
      </span>
      <span class="logo-text">AlisterBank</span>
    </a>

    <nav class="main-nav">
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="/" class="nav-link">Home</a>
        </li>
        <li class="nav-item has-dropdown">
          <a href="#" class="nav-link">Personal Banking</a>
          <ul class="dropdown-menu">
            <li><a href="#">Savings Account</a></li>
            <li><a href="#">Checking Account</a></li>
            <li><a href="#">Credit Cards</a></li>
            <li><a href="#">Personal Loans</a></li>
          </ul>
        </li>
        <li class="nav-item has-dropdown">
          <a href="#" class="nav-link">Business</a>
          <ul class="dropdown-menu">
            <li><a href="#">Business Accounts</a></li>
            <li><a href="#">Business Loans</a></li>
            <li><a href="#">Merchant Services</a></li>
          </ul>
        </li>
        <li class="nav-item has-dropdown">
          <a href="#" class="nav-link">Loans</a>
          <ul class="dropdown-menu">
            <li><a href="#">Home Loans</a></li>
            <li><a href="#">Auto Loans</a></li>
            <li><a href="#">Education Loans</a></li>
          </ul>
        </li>
        <li class="nav-item">
          <a href="/about" class="nav-link">About Us</a>
        </li>
        <% if (user) { %>
        <li class="nav-item">
          <a href="/shortner" class="nav-link">Shortlink</a>
        </li>
        <% } %>
        <li class="nav-item">
          <a href="/contact" class="nav-link">Contact</a>
        </li>
      </ul>
    </nav>

    <div class="header-actions">
      <% if (user) { %>
      <div class="profile-dropdown">
        <button class="profile-avatar" aria-label="User menu" onclick="toggleProfileMenu()">
          <%= user.name ? user.name.charAt(0).toUpperCase() : 'U' %>
        </button>
        <div class="profile-menu" id="profileMenu">
          <div class="profile-menu-header">
            <span class="profile-menu-name"><%= user.name %></span>
            <span class="profile-menu-email"><%= user.email %></span>
          </div>
          <div class="profile-menu-divider"></div>
          <a href="/profile" class="profile-menu-item">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            Profile
          </a>
          <a href="/logout" class="profile-menu-item profile-menu-logout">
            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"/>
            </svg>
            Logout
          </a>
        </div>
      </div>
      <% } else { %>
      <a href="/login" class="btn-outline">Sign In</a>
      <a href="/register" class="btn-primary">Open Account</a>
      <% } %>
    </div>

    <script>
      function toggleProfileMenu() {
        const menu = document.getElementById('profileMenu');
        menu.classList.toggle('active');
      }

      // Close menu when clicking outside
      document.addEventListener('click', function(event) {
        const profileDropdown = document.querySelector('.profile-dropdown');
        const menu = document.getElementById('profileMenu');
        if (profileDropdown && menu && !profileDropdown.contains(event.target)) {
          menu.classList.remove('active');
        }
      });
    </script>

    <button class="mobile-menu-btn" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>
