<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile - AlisterBank</title>
    <link rel="stylesheet" href="/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <%- include('../header') %>

    <main>
      <section class="profile-section">
        <div class="section-container">
          <div class="profile-edit-header">
            <a href="/profile" class="back-link">
              <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
              </svg>
              Back to Profile
            </a>
            <h1>Edit Profile</h1>
            <p>Update your personal information</p>
          </div>

          <% if (error && error.length > 0) { %>
            <div class="alert alert-error">
              <%= error[0] %>
            </div>
          <% } %>
          <% if (success && success.length > 0) { %>
            <div class="alert alert-success">
              <%= success[0] %>
            </div>
          <% } %>

          <div class="profile-content">
            <div class="profile-card">
              <h3>Personal Information</h3>

              <form action="/profile/edit" method="POST" class="edit-profile-form">
                <div class="form-row">
                  <div class="input-group">
                    <label for="firstName">First Name <span class="required">*</span></label>
                    <input
                      type="text"
                      id="firstName"
                      name="firstName"
                      value="<%= profileUser.firstName %>"
                      placeholder="Enter your first name"
                      required
                    />
                  </div>
                  <div class="input-group">
                    <label for="lastName">Last Name <span class="required">*</span></label>
                    <input
                      type="text"
                      id="lastName"
                      name="lastName"
                      value="<%= profileUser.lastName %>"
                      placeholder="Enter your last name"
                      required
                    />
                  </div>
                </div>

                <div class="input-group">
                  <label>Gender</label>
                  <div class="radio-group">
                    <label class="radio-label">
                      <input type="radio" name="gender" value="male" <%= profileUser.gender === 'male' ? 'checked' : '' %> />
                      <span>Male</span>
                    </label>
                    <label class="radio-label">
                      <input type="radio" name="gender" value="female" <%= profileUser.gender === 'female' ? 'checked' : '' %> />
                      <span>Female</span>
                    </label>
                    <label class="radio-label">
                      <input type="radio" name="gender" value="other" <%= profileUser.gender === 'other' ? 'checked' : '' %> />
                      <span>Other</span>
                    </label>
                  </div>
                </div>

                <div class="input-group">
                  <label for="email">Email Address</label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    value="<%= profileUser.email %>"
                    disabled
                    class="input-disabled"
                  />
                  <span class="input-hint">Email cannot be changed</span>
                </div>

                <div class="form-row phone-row">
                  <div class="input-group country-code-group">
                    <label for="countryCode">Country Code</label>
                    <select id="countryCode" name="countryCode" class="country-code-select">
                      <option value="">Select</option>
                      <% countryCodes.forEach(function(country) { %>
                        <option value="<%= country.code %>" <%= profileUser.countryCode === country.code ? 'selected' : '' %>>
                          <%= country.code %> (<%= country.shortName %>)
                        </option>
                      <% }); %>
                    </select>
                  </div>
                  <div class="input-group phone-group">
                    <label for="phone">Phone Number</label>
                    <input
                      type="tel"
                      id="phone"
                      name="phone"
                      value="<%= profileUser.phone || '' %>"
                      placeholder="Enter your phone number"
                      pattern="[0-9]{10,15}"
                    />
                  </div>
                </div>

                <div class="form-actions">
                  <button type="submit" class="btn btn-primary btn-save">Save Changes</button>
                  <a href="/profile" class="btn btn-outline">Cancel</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>
    </main>

    <%- include('../footer') %>
  </body>
</html>
